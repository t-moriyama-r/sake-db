# /pr

AIによる日本語プルリクエスト作成

> **使い分けのガイド:**
> - `/pr`: Claude AIが直接gitコマンドとgh CLIを実行してPRを作成します。各ステップでユーザーの確認を求めるため、より安全ですが手動操作が必要です。
> - `/pr-sh`: シェルスクリプト（ai-pr-draft-ja.sh）を自動実行してPRを作成します。完全に自動化されていますが、ユーザー確認なしに実行されます。
>
> 初めての利用や重要な変更の場合は `/pr` を、日常的な作業や信頼できる環境では `/pr-sh` を推奨します。

## Prompt

あなたはシニアエンジニアとして、現在のブランチの変更内容から日本語のPull Requestを作成します。
シェルスクリプト（ai-pr-draft-ja.sh）を使わず、以下の手順をあなた自身で実行してください。

1. **状況把握**: 
   - `gh repo view --json defaultBranchRef --jq .defaultBranchRef.name` でデフォルトブランチを確認してください。
   - 現在のブランチ名を取得してください。
2. **情報の収集**:
   - `git log [デフォルトブランチ]..HEAD --oneline` でコミット履歴を読んでください。
   - `git diff [デフォルトブランチ]..HEAD` を実行し、変更内容を深く理解してください。
3. **テンプレートの適用**:
   - 標準的な構成（概要・変更内容）で作成してください。
4. **ドラフトPRの作成**:
   - 変更内容を分析し、`Conventional Commits` 形式のタイトルを考えてください。
   - `gh pr create --draft --title "[タイトル]" --body "[生成した本文]"` のコマンド例を提示し、このコマンドを実行してPRを作成してよいかユーザーに明示的に確認し、許可された場合のみ実行してください。
5. **完了報告**:
   - 作成されたPRのURLを教えてください。