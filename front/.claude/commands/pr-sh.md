# コマンド: /pr-sh

# 目的: AIによる日本語プルリクエストのドラフト作成

> **使い分けのガイド:**
> - `/pr`: Claude AIが直接gitコマンドとgh CLIを実行してPRを作成します。各ステップでユーザーの確認を求めるため、より安全ですが手動操作が必要です。
> - `/pr-sh`: シェルスクリプト（ai-pr-draft-ja.sh）を自動実行してPRを作成します。完全に自動化されていますが、ユーザー確認なしに実行されます。
>
> 初めての利用や重要な変更の場合は `/pr` を、日常的な作業や信頼できる環境では `/pr-sh` を推奨します。

## コマンド実行

- **実行タイミング**: 即座
- **目的**: "現在のブランチに対して日本語プロンプトを使用したAI生成のドラフトPRを作成"
- **説明**: コマンドで使用されるシンボルに基づいて生成

## 使用例

`/pr-sh`

> リポジトリルートの `ai-pr-draft-ja.sh` を実行して、日本語のAIプロンプトで新しいドラフトプルリクエストを作成します。

`/pr-sh --debug`

> `DEBUG=1` でスクリプトをデバッグモードで実行します。

## 主要な動作

このコマンドの唯一の機能は、リポジトリルートにある `ai-pr-draft-ja.sh` スクリプトを実行することです。

PR作成、AI通信、git操作のすべてのロジックはスクリプト自体に含まれています。実装の詳細については、`ai-pr-draft-ja.sh` ファイルを参照してください。

この日本語版は、日本語プロンプトをClaude AIに送信し、日本語のPRテンプレート（`PULL_REQUEST_TEMPLATE_JA.md`）を検索します。

## プロンプト

リポジトリのルートディレクトリにある `ai-pr-draft-ja.sh` スクリプトを実行してください。

**重要な実行手順:**
1. `git rev-parse --show-toplevel` でリポジトリのルートディレクトリを取得してください
2. そのルートディレクトリに移動してください
3. `--debug` フラグが指定されている場合は `DEBUG=1 ./ai-pr-draft-ja.sh` を、それ以外の場合は `./ai-pr-draft-ja.sh` を実行してください
4. **確認を求めずに即座に実行してください** - このコマンドは完全に自動化されているため、ユーザーに実行確認を求める必要はありません
5. スクリプトの実行結果（成功またはエラー）をそのまま表示してください

## フラグ

### `--debug`

- **目的**: `ai-pr-draft-ja.sh` スクリプトのデバッグモードを有効化
- **動作**: スクリプト実行前に `DEBUG=1` 環境変数を設定